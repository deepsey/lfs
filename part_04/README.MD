# –ß–∞—Å—Ç—å 4

## 6. Cross Compiling Temporary Tools

### üî∑ M4-1.4.19

–†–∞—Å–ø–∞–∫–æ–≤—ã–≤–∞–µ–º –∏—Å—Ö–æ–¥–Ω–∏–∫–∏ –ø–∞–∫–µ—Ç–∞ –∏ –ø–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –µ–≥–æ –∫–∞—Ç–∞–ª–æ–≥
```
tar xvf m4-1.4.19.tar.xz  
cd cd m4-1.4.19
```
–ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º make
```
./configure --prefix=/usr --host=$LFS_TGT --build=$(build-aux/config.guess)
```
–ö–æ–º–∏–ª–∏—Ä—É–µ–º –ø–∞–∫–µ—Ç
```
time make -j8
.......................................
real    0m2.990s  
user    0m9.277s  
sys     0m1.334s  
```
–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–∞–∫–µ—Ç —Å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π DESTDIR=$LFS
```
make DESTDIR=$LFS install   
lfs:/mnt/lfs/sources/m4-1.4.19$ echo $?
0
```
–£–¥–∞–ª—è–µ–º –Ω–µ–Ω—É–∂–Ω—ã–µ —Ñ–∞–π–ª—ã
```
cd ..  
rm -rf m4-1.4.19
```
---
### üî∑ Ncurses-6.3
–†–∞—Å–ø–∞–∫–æ–≤—ã–≤–∞–µ–º –∏—Å—Ö–æ–¥–Ω–∏–∫–∏ –ø–∞–∫–µ—Ç–∞ –∏ –ø–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –µ–≥–æ –∫–∞—Ç–∞–ª–æ–≥
```
tar xvf ncurses-6.3.tar.gz  
cd ncurses-6.3
```
–£–±–∏—Ä–∞–µ–º –∏–∑ —Å–∫—Ä–∏–ø—Ç–∞ configure –≤—Å–µ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ–± —É—Ç–∏–ª–∏—Ç–µ mawk
```
sed -i s/mawk// configure
```
–°–æ–∑–¥–∞–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é build
```
mkdir -v build
```
–°–æ–∑–¥–∞–µ–º —Å—Ç—ç–∫ –∫–∞—Ç–∞–ª–æ–≥–æ–≤
```
pushd build
/mnt/lfs/sources/ncurses-6.3/build /mnt/lfs/sources/ncurses-6.3
```
–¢.–µ. —Ç–µ–ø–µ—Ä—å –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∫–æ–º–∞–Ω–¥—ã popd –º—ã –ø–µ—Ä–µ–π–¥–µ–º –∏–∑ –æ–¥–Ω–æ–≥–æ –∫–∞—Ç–∞–ª–æ–≥–∞ /mnt/lfs/sources/ncurses-6.3/build –≤ –∫–∞—Ç–∞–ª–æ–≥/mnt/lfs/sources/ncurses-6.3  
–ó–∞–ø—É—Å–∫–∞–µ–º –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —Å–±–æ—Ä–∫–∏ –ø—Ä–æ–≥—Ä–∞–º–º—ã tic –∏ –ø–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –≤—ã—à–µ—Å—Ç–æ—è—â–∏–π –∫–∞—Ç–∞–ª–æ–≥
```
../configure  
make -C include  
make -C progs tic  
popd  
```
–ì–æ—Ç–æ–≤–∏–º ncurces –¥–ª—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
```
./configure --prefix=/usr --host=$LFS_TGT --build=$(./config.guess) --mandir=/usr/share/man --with-manpage-format=normal --with-shared --without-debug --without-ada --without-normal --enable-widec
```
–ö–æ–º–∏–ª–∏—Ä—É–µ–º –ø–∞–∫–µ—Ç
```
time make -j8
.......................................
real    0m5.661s  
user    0m25.875s  
sys     0m4.104s  
lfs:/mnt/lfs/sources/ncurses-6.3$ echo $?  
0
```
–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–∞–∫–µ—Ç —Å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
```
make DESTDIR=$LFS TIC_PATH=$(pwd)/build/progs/tic install
lfs:/mnt/lfs/sources/ncurses-6.3$ echo $?
0
```
–ó–∞–ø–∏—Å—ã–≤–∞–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä "INPUT(-lncursesw)" –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫—É libncurses.so
```
echo "INPUT(-lncursesw)" > $LFS/usr/lib/libncurses.so
```
–£–¥–∞–ª—è–µ–º –Ω–µ–Ω—É–∂–Ω—ã–µ —Ñ–∞–π–ª—ã
```
cd ..  
rm -rf ncurses-6.3

```
---

### üî∑ Bash-5.1.16
–†–∞—Å–ø–∞–∫–æ–≤—ã–≤–∞–µ–º –∏—Å—Ö–æ–¥–Ω–∏–∫–∏ –ø–∞–∫–µ—Ç–∞ –∏ –ø–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –µ–≥–æ –∫–∞—Ç–∞–ª–æ–≥
```
tar xvf bash-5.1.16.tar.gz  
cd bash-5.1.16
```
–ì–æ—Ç–æ–≤–∏–º bash –¥–ª—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
```
./configure --prefix=/usr --build=$(support/config.guess) --host=$LFS_TGT --without-bash-malloc
```
–ö–æ–º–∏–ª–∏—Ä—É–µ–º –ø–∞–∫–µ—Ç
```
time make -j8
.......................................
real    0m3.735s  
user    0m21.924s  
sys     0m2.107s  
lfs:/mnt/lfs/sources/bash-5.1.16$ echo $?  
0
```
–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–∞–∫–µ—Ç —Å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π DESTDIR=$LFS
```
make DESTDIR=$LFS install  
lfs:/mnt/lfs/sources/bash-5.1.16$ echo $?  
0
```
–°–æ–∑–¥–∞–µ–º —Å—Å—ã–ª–∫—É –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–º, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏—Ö sh –≤ –∫–∞—á–µ—Å—Ç–≤–µ –æ–±–æ–ª–æ—á–∫–∏
```
ln -sv bash $LFS/bin/sh
```
–£–¥–∞–ª—è–µ–º –Ω–µ–Ω—É–∂–Ω—ã–µ —Ñ–∞–π–ª—ã
```
cd ..  
rm -rf bash-5.1.16
```
---

